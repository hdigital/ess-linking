[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ESS party linking",
    "section": "",
    "text": "ESS party linking\nCode and supplementary information for: Paul Bederke and Holger Döring. 2023. “Harmonizing and Linking Party Information: The ESS as an Example of Complex Data Linking.”\n\n\nCode\nlibrary(tidyverse)\n\nprt_raw &lt;- read_rds(\"data/01-ess-prtv-prtc.rds\")\n\npl_dt &lt;-\n  prt_raw |&gt;\n  filter(!is.na(prtv)) |&gt;\n  distinct(cntry, essround, prtv) |&gt;\n  count(cntry, essround, sort = TRUE) |&gt;\n  mutate(\n    cntry = factor(cntry) |&gt; fct_rev(),\n    essround = factor(essround)\n  )\n\npl &lt;-\n  ggplot(pl_dt, aes(y = cntry, x = essround, size = n)) +\n  geom_point(colour = \"darkgrey\") +\n  scale_y_discrete(name = \"\") +\n  scale_x_discrete(name = \"ESS Round\") +\n  scale_size_continuous(name = \"n (prtv*)\") +\n  theme_bw() +\n  theme(axis.ticks.y = element_blank()) +\n  guides(color = FALSE, scale = \"none\")\n\nggsave(\"figures-tables/figure-1_ess-rounds.png\", pl, width = 9, height = 6, dpi = 300)\npl"
  },
  {
    "objectID": "ess-sources.html#ess-data-sources",
    "href": "ess-sources.html#ess-data-sources",
    "title": "1  ESS data sources",
    "section": "1.1 ESS data sources",
    "text": "1.1 ESS data sources\nESS data sets from europeansocialsurvey.org/data\nDOI references\n\nESS Round 1 – https://doi.org/10.21338/ess1e06_6\nESS Round 2 – https://doi.org/10.21338/ess2e03_6\nESS Round 3 – https://doi.org/10.21338/ess3e03_7\nESS Round 4 – https://doi.org/10.21338/ess4e04_5\nESS Round 5 – https://doi.org/10.21338/ess5e03_4\nESS Round 6 – https://doi.org/10.18712/ess6e02_5\nESS Round 7 – https://doi.org/10.21338/ess7e02_2\nESS Round 8 – https://doi.org/10.21338/ess8e02_2\nESS Round 9 – https://doi.org/10.21338/ess9e03_1\nESS Round 10 – https://doi.org/10.21338/ess10e03_1\nESS Round 10 – https://doi.org/10.21338/ess10sce03_0 (self-completion)\n\nData files are imported into R with readstata13\n\n\nCode\ntibble(ESS_file = fs::dir_ls(\"data-raw/\", glob = \"*ESS*.dta\")) |&gt;\n  mutate(\n    Round = str_extract(ESS_file, \"\\\\d+\") |&gt; as.integer(),\n    hash = rlang::hash_file(ESS_file),\n    ESS_file = str_remove(ESS_file, \"data-raw/\")\n  ) |&gt;\n  relocate(Round, .before = ESS_file) |&gt;\n  arrange(Round) |&gt;\n  kable()\n\n\n\n\n\nRound\nESS_file\nhash\n\n\n\n\n1\nESS1e06_6.dta\nc61f508eb0f5b60e038be2d5793a9f4d\n\n\n2\nESS2e03_6.dta\n1ddea926b393d16417856e1135b29d67\n\n\n3\nESS3e03_7.dta\nf3922c40bf5f37d0d5f1f1553a180898\n\n\n4\nESS4e04_5.dta\nf9455c929aee50fd3ab71a9ec9fd51a4\n\n\n5\nESS5e03_4.dta\n88c340e6a63d88bd7b1e42a2ded830de\n\n\n6\nESS6e02_5.dta\neb508dfaec9f896851db7cc0de1cc1e9\n\n\n7\nESS7e02_2.dta\n0d413a5724618ff7ec373a48edbf5f0e\n\n\n8\nESS8e02_2.dta\nb1ab85d0a22aa17306e908095269e4dd\n\n\n9\nESS9e03_1.dta\n536f541f23064fd0b46ed7fd8b1e932a\n\n\n10\nESS10.dta\n533b89b4ebda6f58d5aef181b2c42c9b\n\n\n10\nESS10SC.dta\n975db0389d844e25aa669c3d2da4f7ac\n\n\n\n\n\nNote — The ESS-10 is released with two data files, one for the standard face-to-face interviews and another file for countries with self-completion mode due to the COVID-19 restrictions."
  },
  {
    "objectID": "ess-sources.html#ess-rounds",
    "href": "ess-sources.html#ess-rounds",
    "title": "1  ESS data sources",
    "section": "1.2 ESS rounds",
    "text": "1.2 ESS rounds\nSummary of ESS rounds\n\nn – number of responses\nn_countries – number of countries in ESS round\ninw_first and inw_last – first and last interview\n\n\n\nCode\ness_raw &lt;- read_rds(\"data/02-ess-select.rds\")\n\ness_raw |&gt;\n  summarise(\n    n = n(),\n    n_countries = n_distinct(cntry),\n    inw_first = min(year(inw_date), na.rm = TRUE),\n    inw_last = max(year(inw_date), na.rm = TRUE),\n    .by = \"essround\"\n  ) |&gt;\n  arrange(essround)\n\n\n\n\n\n\nessround\nn\nn_countries\ninw_first\ninw_last\n\n\n\n\n1\n42359\n22\n2002\n2003\n\n\n2\n47537\n25\n2004\n2006\n\n\n3\n43000\n23\n2006\n2007\n\n\n4\n56752\n29\n2008\n2010\n\n\n5\n52458\n27\n2010\n2012\n\n\n6\n54673\n29\n2012\n2013\n\n\n7\n40185\n21\n2014\n2015\n\n\n8\n44387\n23\n2016\n2017\n\n\n9\n49519\n29\n2018\n2020\n\n\n10\n58810\n30\n2020\n2022"
  },
  {
    "objectID": "ess-sources.html#countries",
    "href": "ess-sources.html#countries",
    "title": "1  ESS data sources",
    "section": "1.3 Countries",
    "text": "1.3 Countries\n\n\nCode\ness_raw |&gt;\n  summarise(\n    n = n_distinct(cntry),\n    countries = paste(unique(sort(cntry)), collapse = \", \"),\n    .by = \"essround\"\n  ) |&gt;\n  arrange(essround)\n\n\n\n\n\n\n\n\n\n\n\nessround\nn\ncountries\n\n\n\n\n1\n22\nAT, BE, CH, CZ, DE, DK, ES, FI, FR, GB, GR, HU, IE, IL, IT, LU, NL, NO, PL, PT, SE, SI\n\n\n2\n25\nAT, BE, CH, CZ, DE, DK, EE, ES, FI, FR, GB, GR, HU, IE, IS, LU, NL, NO, PL, PT, SE, SI, SK, TR, UA\n\n\n3\n23\nAT, BE, BG, CH, CY, DE, DK, EE, ES, FI, FR, GB, HU, IE, NL, NO, PL, PT, RU, SE, SI, SK, UA\n\n\n4\n29\nBE, BG, CH, CY, CZ, DE, DK, EE, ES, FI, FR, GB, GR, HR, HU, IE, IL, LV, NL, NO, PL, PT, RO, RU, SE, SI, SK, TR, UA\n\n\n5\n27\nBE, BG, CH, CY, CZ, DE, DK, EE, ES, FI, FR, GB, GR, HR, HU, IE, IL, LT, NL, NO, PL, PT, RU, SE, SI, SK, UA\n\n\n6\n29\nAL, BE, BG, CH, CY, CZ, DE, DK, EE, ES, FI, FR, GB, HU, IE, IL, IS, IT, LT, NL, NO, PL, PT, RU, SE, SI, SK, UA, XK\n\n\n7\n21\nAT, BE, CH, CZ, DE, DK, EE, ES, FI, FR, GB, HU, IE, IL, LT, NL, NO, PL, PT, SE, SI\n\n\n8\n23\nAT, BE, CH, CZ, DE, EE, ES, FI, FR, GB, HU, IE, IL, IS, IT, LT, NL, NO, PL, PT, RU, SE, SI\n\n\n9\n29\nAT, BE, BG, CH, CY, CZ, DE, DK, EE, ES, FI, FR, GB, HR, HU, IE, IS, IT, LT, LV, ME, NL, NO, PL, PT, RS, SE, SI, SK\n\n\n10\n30\nAT, BE, BG, CH, CZ, DE, EE, ES, FI, FR, GB, GR, HR, HU, IE, IL, IS, IT, LT, LV, ME, MK, NL, NO, PL, PT, RS, SE, SI, SK"
  },
  {
    "objectID": "prt-variables.html#prt-variables",
    "href": "prt-variables.html#prt-variables",
    "title": "2  prt* party variables",
    "section": "2.1 prt* variables",
    "text": "2.1 prt* variables\nAll ESS rounds include two types of survey questions with party information.\n\nprtv* — “Party voted for in last national election, [country]?”\nprtc* — “Which party feel closer to, [country]?”\n\n\n\nCode\ness_raw |&gt;\n  summarise(\n    n = n(),\n    n_countries = n_distinct(cntry),\n    n_prtv = n_distinct(prtv),\n    n_prtc = n_distinct(prtc),\n    .by = \"essround\"\n  ) |&gt;\n  arrange(essround)\n\n\n\n\n\n\nessround\nn\nn_countries\nn_prtv\nn_prtc\n\n\n\n\n1\n42359\n22\n251\n248\n\n\n2\n47537\n25\n281\n274\n\n\n3\n43000\n23\n248\n251\n\n\n4\n56752\n29\n309\n296\n\n\n5\n52458\n27\n321\n302\n\n\n6\n54673\n29\n331\n331\n\n\n7\n40185\n21\n258\n252\n\n\n8\n44387\n23\n283\n271\n\n\n9\n49519\n29\n363\n374\n\n\n10\n58810\n30\n380\n390"
  },
  {
    "objectID": "prt-variables.html#ess-9-example",
    "href": "prt-variables.html#ess-9-example",
    "title": "2  prt* party variables",
    "section": "2.2 ESS-9 example",
    "text": "2.2 ESS-9 example\nWe use the ESS-9 integrated file to describe the structure of the prt* variables in ESS data files.\nEach ESS round uses country level variables for the prt* variables (e.g. prtvtcat — party-voted-for Austria ESS-9).\nThese prt* variables include the following elements:\n\nstarting with prt\nindicating the type of prt variable\n\nv — “party-voted-for”\nc — “party-close-to”\n\ntwo character country code\nelectoral tier number for Germany and Lithuania (prtv* only)\n\n\n\nCode\ness9_prt &lt;-\n  ess9_raw |&gt;\n  select(cntry, starts_with(c(\"prtv\", \"prtc\"))) |&gt;\n  pivot_longer(!cntry, names_to = \"variable\", values_to = \"party\") |&gt;\n  na.omit()\n\ness9_prt_n &lt;-\n  ess9_prt |&gt;\n  summarise(\n    cntry = first(cntry),\n    responses = n(),\n    parties = paste(unique(party) |&gt; as.character() |&gt; sort(), collapse = \", \"),\n    .by = c(cntry, variable)\n  )\n\n\nESS-9 prt* variables by country\n\n\nCode\ntbl_out &lt;-\n  ess9_prt_n |&gt;\n  summarise(\n    n = n(),\n    variables = paste(variable |&gt; sort(), collapse = \", \"),\n    .by = cntry\n  )\n\nif (knitr::is_html_output()) {\n  tbl_out |&gt;\n    reactable(searchable = TRUE, striped = TRUE)\n} else {\n  tbl_out |&gt;\n    slice((1:5))\n}\n\n\n\n\n\n\n\nGermany and Lithuania include multiple prtv* variables asking for voting decisions in each electoral tier. These variables include a number for the tier in the variable name.\nWe use the national tier (“prtvede2”, “prtvblt1”) as the primary “party-voted-for” variable.\n\n\nCode\ness9_prt |&gt;\n  filter(str_detect(variable, \"\\\\d\")) |&gt;\n  distinct(cntry, variable) |&gt;\n  arrange(cntry, variable)\n\n\n\n\n\n\ncntry\nvariable\n\n\n\n\nDE\nprtvede1\n\n\nDE\nprtvede2\n\n\nLT\nprtvblt1\n\n\nLT\nprtvblt2\n\n\nLT\nprtvblt3"
  },
  {
    "objectID": "prt-variables.html#prtv-id-differences",
    "href": "prt-variables.html#prtv-id-differences",
    "title": "2  prt* party variables",
    "section": "2.3 prtv* ID differences",
    "text": "2.3 prtv* ID differences\nESS may use different IDs across ESS rounds\n\n\nCode\nprtv_ids &lt;-\n  prt_raw |&gt;\n  mutate(party = as.character(party)) |&gt;\n  filter(\n    str_detect(variable, \"^prtv\"), # party-voted-for variable\n    !str_detect(variable, \"de1|lt[23]\") # national vote only DEU and LTU\n  ) |&gt;\n  select(-idno, -variable, -ess_id) |&gt;\n  distinct() |&gt;\n  arrange(party_id) |&gt;\n  pivot_wider(\n    names_from = party_id,\n    values_from = party,\n    names_prefix = \"id_\"\n  ) |&gt;\n  arrange(cntry, essround)\n\n\ne.g. Netherlands prtv* rounds 1–10\n\n\nCode\nprtv_ids |&gt;\n  filter(cntry == \"NL\") |&gt;\n  select(essround, id_4:id_6)\n\n\n\n\n\n\n\n\n\n\n\n\nessround\nid_4\nid_5\nid_6\n\n\n\n\n1\nList Pim Fortuyn\nDemocrats ’66\nGreen Left\n\n\n2\nList Pim Fortuyn\nDemocrats ’66\nGreen Left\n\n\n3\nList Pim Fortuyn\nDemocrats ’66\nGreen Left\n\n\n4\nList Pim Fortuyn\nDemocrats ’66\nGreen Left\n\n\n5\nChristian Democratic Appeal\nSocialist Party\nDemocrats ’66\n\n\n6\nChristian Democratic Appeal\nSocialist Party\nDemocrats ’66\n\n\n7\nSocialist Party\nChristian Democratic Appeal\nDemocrats ’66\n\n\n8\nSocialist Party\nChristian Democratic Appeal\nDemocrats ’66\n\n\n9\nSocialist Party\nChristian Democratic Appeal\nDemocrats ’66\n\n\n10\nSocialist Party\nChristian Democratic Appeal\nDemocrats ’66"
  },
  {
    "objectID": "prt-variables.html#prtvprtc-id-differences",
    "href": "prt-variables.html#prtvprtc-id-differences",
    "title": "2  prt* party variables",
    "section": "2.4 prtv*/prtc* ID differences",
    "text": "2.4 prtv*/prtc* ID differences\nESS party IDs may differ between the prtv* and prtc* variables.\n\n\nCode\ntbl &lt;-\n  prtvc_raw |&gt;\n  mutate(\n    prtv_party_id = str_extract(prtv, \"\\\\d+-\\\\d+\") |&gt; str_remove(\"\\\\d+-\") |&gt; as.integer(),\n    prtc_party_id = str_extract(prtc, \"\\\\d+-\\\\d+\") |&gt; str_remove(\"\\\\d+-\") |&gt; as.integer()\n  ) |&gt;\n  filter(prtv_party_id == prtc_party_id & prtv_party != prtc_party) |&gt;\n  select(cntry, essround, party_id = prtv_party_id, prtv_party, prtc_party) |&gt;\n  distinct() |&gt;\n  arrange(essround, cntry, prtv_party)\n\n\nExamples from six countries in ESS-9\n\n\nCode\ntbl |&gt;\n  filter(essround == 9) |&gt;\n  slice(2, 5, 18, 27, 29, 38)\n\n\n\n\n\n\n\n\n\n\n\n\n\ncntry\nessround\nparty_id\nprtv_party\nprtc_party\n\n\n\n\nBG\n9\n2\nBalgarska sotsialisticheska partiya (BSP)\nDvizhenie za prava i svobodi (DPS)\n\n\nFI\n9\n10\nGreen League\nIndependence Party\n\n\nLT\n9\n2\nHomeland Union - Lithuanian Christian Democrats (TS-LKD)\nLithuanian Peasant and Greens Union (LVZS)\n\n\nPL\n9\n3\nNowoczesna\nPlatforma Obywatelska\n\n\nPT\n9\n17\nVotou em branco/ nulo\nCDS-PP\n\n\nSK\n9\n5\nĽS Naše Slovensko\nChristian Democratic Movement (KDH)\n\n\n\n\n\n\n\n\nCode\ntbl_v &lt;-\n  prtvc_raw |&gt;\n  filter(str_detect(prtv, \"FI-(8|9|10)-10-v\")) |&gt;\n  distinct(essround, prtv, prtv_party)\n\ntbl_c &lt;-\n  prtvc_raw |&gt;\n  filter(str_detect(prtc, \"FI-(8|9|10)-10-c\")) |&gt;\n  distinct(essround, prtc, prtc_party)\n\ntbl_out &lt;-\n  tbl_v |&gt;\n  left_join(tbl_c)\n\nwrite_csv(tbl_out, \"figures-tables/table-1_ess-incoherence.csv\")"
  },
  {
    "objectID": "pf-harmonization.html#ess-party-ids",
    "href": "pf-harmonization.html#ess-party-ids",
    "title": "3  Party Facts harmonization",
    "section": "3.1 ESS party IDs",
    "text": "3.1 ESS party IDs\nParty Facts (PF) harmonizes ESS party IDs by creating a unique ESS party id (“first_ess_id”) for all ESS rounds. — see PF GitHub // essprtv\n\n\nCode\npf |&gt;\n  mutate(prt_variable = str_extract(ess_variable, \"[:alpha:]{4}\")) |&gt;\n  summarise(\n    n_ess_parties = n_distinct(ess_id),\n    n_harmonized = n_distinct(first_ess_id),\n    .by = prt_variable\n  )\n\n\n\n\n\n\nprt_variable\nn_ess_parties\nn_harmonized\n\n\n\n\nprtv\n3304\n961\n\n\nprtc\n2979\n864"
  },
  {
    "objectID": "pf-harmonization.html#parties-per-country",
    "href": "pf-harmonization.html#parties-per-country",
    "title": "3  Party Facts harmonization",
    "section": "3.2 Parties per country",
    "text": "3.2 Parties per country\n\n\nCode\ntbl &lt;-\n  pf |&gt;\n  summarise(\n    n_essrounds = n_distinct(essround),\n    n_ess_parties = n(),\n    n_harmonized = n_distinct(first_ess_id),\n    .by = cntry\n  ) |&gt;\n  arrange(cntry)\n\n\nNumber of ESS party IDs and harmonized IDs in ESS rounds by country (prtv and prtc)\n\n\nCode\nif (knitr::is_html_output()) {\n  tbl |&gt; reactable(searchable = TRUE, striped = TRUE)\n} else {\n  tbl\n}"
  },
  {
    "objectID": "ches-lrscale.html#ches-information",
    "href": "ches-lrscale.html#ches-information",
    "title": "4  CHES left-right validation",
    "section": "4.1 CHES information",
    "text": "4.1 CHES information\nChapel Hill Expert Survey (CHES) series\n\n\nCode\nches_raw |&gt;\n  summarise(\n    countries = n_distinct(country),\n    parties = n(),\n    .by = year\n  )\n\n\n\n\n\n\nyear\ncountries\nparties\n\n\n\n\n1999\n14\n142\n\n\n2002\n23\n171\n\n\n2006\n24\n188\n\n\n2010\n24\n203\n\n\n2014\n28\n245\n\n\n2019\n28\n247"
  },
  {
    "objectID": "ches-lrscale.html#ches-and-ess",
    "href": "ches-lrscale.html#ches-and-ess",
    "title": "4  CHES left-right validation",
    "section": "4.2 CHES and ESS",
    "text": "4.2 CHES and ESS\nNumber of countries and parties that are included in ESS and CHES for an ESS round.\n\n\nCode\ness_raw |&gt;\n  summarize(\n    year = first(year),\n    countries_n = n_distinct(cntry),\n    parties_n = n_distinct(prtv),\n    ches_year = first(ches_year),\n    ches_parties_n = n_distinct(ches_id),\n    .by = c(essround)\n  ) |&gt;\n  arrange(essround)\n\n\n\n\n\n\nessround\nyear\ncountries_n\nparties_n\nches_year\nches_parties_n\n\n\n\n\n1\n2002\n18\n196\n2002\n131\n\n\n2\n2004\n18\n190\n2002\n128\n\n\n3\n2006\n18\n191\n2006\n132\n\n\n4\n2008\n21\n215\n2006\n143\n\n\n5\n2010\n20\n241\n2010\n157\n\n\n6\n2012\n20\n239\n2010\n151\n\n\n7\n2014\n18\n216\n2014\n138\n\n\n8\n2016\n18\n216\n2014\n133\n\n\n9\n2018\n24\n299\n2014\n184\n\n\n10\n2020\n23\n284\n2019\n169\n\n\n\n\n\n\nOverview country coverage ESS and CHES trend file\n\ness_cntry — number of countries in ESS round\nches_cntry — number of ESS round countries in CHES\nches_missing — names of ESS round countries not in CHES\n\n\n\nCode\ncntry_ches_n &lt;-\n  ess_raw |&gt;\n  summarise(ches_cntry = n_distinct(cntry), .by = essround)\n\ncntry_ches_none &lt;-\n  ess_all_raw |&gt;\n  distinct(essround, cntry) |&gt;\n  anti_join(ess_raw |&gt; distinct(essround, cntry)) |&gt;\n  arrange(cntry) |&gt;\n  summarise(ches_missing = paste0(cntry, collapse = \", \"), .by = essround)\n\ness_all_raw |&gt;\n  summarise(ess_cntry = n_distinct(cntry), .by = essround) |&gt;\n  left_join(cntry_ches_n) |&gt;\n  left_join(cntry_ches_none) |&gt;\n  arrange(essround)\n\n\n\n\n\n\nessround\ness_cntry\nches_cntry\nches_missing\n\n\n\n\n1\n22\n18\nCH, IL, LU, NO\n\n\n2\n25\n18\nCH, EE, IS, LU, NO, TR, UA\n\n\n3\n23\n18\nCH, CY, NO, RU, UA\n\n\n4\n29\n21\nCH, CY, HR, IL, NO, RU, TR, UA\n\n\n5\n27\n20\nCH, CY, HR, IL, NO, RU, UA\n\n\n6\n29\n20\nAL, CH, CY, IL, IS, NO, RU, UA, XK\n\n\n7\n21\n18\nCH, IL, NO\n\n\n8\n23\n18\nCH, IL, IS, NO, RU\n\n\n9\n29\n24\nCH, IS, ME, NO, RS\n\n\n10\n30\n23\nCH, IL, IS, ME, MK, NO, RS"
  },
  {
    "objectID": "ches-lrscale.html#country-year-correlation",
    "href": "ches-lrscale.html#country-year-correlation",
    "title": "4  CHES left-right validation",
    "section": "4.3 Country-year correlation",
    "text": "4.3 Country-year correlation\n\n\nCode\ness_party &lt;-\n  ess_raw |&gt;\n  filter(!is.na(prtv)) |&gt;\n  summarise(\n    lr_mean = mean(lrscale, na.rm = TRUE),\n    lr_sd = sd(lrscale, na.rm = TRUE),\n    lr_n = n(),\n    ches_lr = first(ches_lr),\n    .by = c(cntry, year, prtv, prtv_party, ches_year),\n  )\n\n\nCountry-year correlations for ESS and CHES left-right positions in each ESS round with at least 3 parties and 10 responses per party in a country.\nESS left-right party positions are calculated as mean values of lrscale variables for respondents that voted for the party (prtv*).\n\nlrscale — self-placement on left right scale // ESS rounds\nprtv* — “party-voted-for” in last national election // ESS rounds\nches_lr — left-right party position // CHES trend file\n\nlrgen — “position of the party in YEAR in terms of its overall ideological stance.” // CHES trendfile\n\n\n\n\nCode\ness_party_filter &lt;-\n  ess_party |&gt;\n  na.omit() |&gt;\n  filter(lr_n &gt;= 10) |&gt;\n  mutate(n = n(), .by = c(cntry, year)) |&gt;\n  filter(n &gt;= 3)\n\ncorr &lt;-\n  ess_party_filter |&gt;\n  summarise(\n    n_parties = first(n),\n    lr_corr = cor(lr_mean, ches_lr, use = \"pairwise.complete.obs\"),\n    .by = c(cntry, year, ches_year)\n  ) |&gt;\n  arrange(cntry, year)\n\n# fivenum(corr$lr_corr)\n\n\nThe table summarizes the country-year correlations by providing 0%, 10%, 25%, 50%, 75%, and 100% quantiles. The results are visualized in Figure 4.1.\n\n\nCode\ntbl_out &lt;-\n  corr |&gt;\n  summarise(\n    p0 = quantile(lr_corr, 0),\n    p10 = quantile(lr_corr, 0.10),\n    p25 = quantile(lr_corr, 0.25),\n    p50 = quantile(lr_corr, 0.50),\n    p75 = quantile(lr_corr, 0.75),\n    p100 = quantile(lr_corr, 1),\n    .by = year\n  ) |&gt;\n  mutate(across(p0:p100, \\(x) round(x, 2))) |&gt;\n  rename(ess_year = year) |&gt;\n  arrange(ess_year)\n\nwrite_csv(tbl_out, \"figures-tables/table-3_ches-validation.csv\")\ntbl_out\n\n\n\n\n\n\ness_year\np0\np10\np25\np50\np75\np100\n\n\n\n\n2002\n0.82\n0.87\n0.94\n0.95\n0.99\n1.00\n\n\n2004\n0.77\n0.83\n0.87\n0.91\n0.99\n1.00\n\n\n2006\n0.63\n0.86\n0.89\n0.93\n0.98\n1.00\n\n\n2008\n-0.35\n0.79\n0.90\n0.94\n0.98\n1.00\n\n\n2010\n0.45\n0.78\n0.91\n0.96\n0.97\n0.99\n\n\n2012\n0.55\n0.76\n0.92\n0.96\n0.99\n1.00\n\n\n2014\n0.73\n0.83\n0.88\n0.91\n0.95\n0.98\n\n\n2016\n0.77\n0.87\n0.90\n0.92\n0.95\n1.00\n\n\n2018\n0.26\n0.81\n0.90\n0.93\n0.98\n1.00\n\n\n2020\n0.35\n0.56\n0.82\n0.93\n0.98\n0.99\n\n\n\n\n\n\nCountry-year correlations by country // interactive table\n\n\nCode\nif (knitr::is_html_output()) {\n  corr |&gt;\n    mutate(lr_corr = round(lr_corr, 2)) |&gt;\n    reactable(searchable = TRUE, striped = TRUE)\n}\n\n\n\n\n\n\n\n\n\nCode\nro_2008 &lt;-\n  ess_party |&gt;\n  filter(lr_n &gt;= 10) |&gt;\n  filter(cntry == \"RO\", year == 2008) |&gt;\n  left_join(ess_raw |&gt; distinct(prtv, prtv_party)) |&gt;\n  mutate(lr_mean = round(lr_mean, 2)) |&gt;\n  select(-lr_sd)\n\nro_2008_cor &lt;-\n  cor(ro_2008$lr_mean, ro_2008$ches_lr, use = \"pairwise.complete.obs\") |&gt;\n  round(2)\n\n\nLowest country-year correlation (-0.35) for ESS Romania 2008.\n\n\nCode\nro_2008 |&gt;\n  arrange(prtv) |&gt;\n  select(cntry, year, prtv, prtv_party, lr_n, lr_mean, ches_year, ches_lr)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncntry\nyear\nprtv\nprtv_party\nlr_n\nlr_mean\nches_year\nches_lr\n\n\n\n\nRO\n2008\nRO-4-1-v\nPD-L\n517\n6.95\n2006\nNA\n\n\nRO\n2008\nRO-4-12-v\nOther: PIN\n14\n5.25\n2006\nNA\n\n\nRO\n2008\nRO-4-2-v\nAlianta PSD-PC\n449\n3.52\n2006\nNA\n\n\nRO\n2008\nRO-4-3-v\nPNL\n165\n7.06\n2006\n6.7\n\n\nRO\n2008\nRO-4-4-v\nPRM\n31\n4.54\n2006\n7.0\n\n\nRO\n2008\nRO-4-5-v\nUDMR\n67\n5.94\n2006\n6.0\n\n\nRO\n2008\nRO-4-6-v\nPNG-CD\n15\n6.75\n2006\nNA\n\n\nRO\n2008\nRO-4-9-v\nPNTCD\n32\n5.62\n2006\nNA\n\n\n\n\n\n\n\n\nCode\ncorr |&gt;\n  filter(lr_corr &gt;= 0.5) |&gt;\n  mutate(year = factor(year)) |&gt;\n  ggplot(aes(year, lr_corr)) +\n  geom_violin(colour = \"darkgrey\") +\n  geom_sina() +\n  theme_minimal()\n\n\n\n\n\nFigure 4.1: Violin plot for country wise correlations ( &lt; 0.5 removed)"
  },
  {
    "objectID": "ches-lrscale.html#share-covered",
    "href": "ches-lrscale.html#share-covered",
    "title": "4  CHES left-right validation",
    "section": "4.4 Share covered",
    "text": "4.4 Share covered\n\n\n\nCode\nid_select &lt;- \"ches_id\" # \"ches_id\" + \"parlgov_id\"\ness_check &lt;- ess_raw # ess_raw + ess_cabinet_raw\ntbl_file_name &lt;- \"figures-tables/table-2a_ches-coverage.csv\"\n\n\n\n\nWe calculate the share of matches for the “party-voted-for” (prtv) question. Excluded from the calculation are instances of other, independent, and technical (see Party Facts codebook).\n\n\nCode\nlink_table_technical &lt;-\n  read_rds(\"data/03-party-facts-links-technical.rds\")\n\nprtv &lt;-\n  ess_check |&gt;\n  left_join(link_table_technical, by = c(\"prtv\" = \"ess_id\")) |&gt;\n  select(cntry, essround, prtv, prtv_party, all_of(id_select), partyfacts_name, technical) |&gt;\n  filter(!is.na(prtv)) |&gt;\n  mutate(is_match = if_else(is.na(.data[[id_select]]), 0, 1))\n\nprtv_match &lt;-\n  prtv |&gt;\n  filter(technical != 7 & technical != 8 & technical != 12 | is.na(technical)) |&gt;\n  summarise(\n    prvt_n = n(),\n    is_match = first(is_match),\n    .by = c(cntry, essround, prtv, prtv_party)\n  )\n\nprtv_share &lt;-\n  prtv_match |&gt;\n  summarise(\n    share_match = (sum(prvt_n * is_match) * 100 / sum(prvt_n)) |&gt; round(1),\n    .by = c(cntry, essround)\n  )\n\n\nThe table summarizes the share of party matches across all countries and ESS rounds.\n\n\nCode\ntbl_out &lt;-\n  prtv_share |&gt;\n  reframe(\n    enframe(\n      quantile(share_match, c(0, 0.1, 0.25, 0.5, 0.75, 1)),\n      \"quantile\", \"share_match\"\n    )\n  ) |&gt;\n  mutate(share_match = round(share_match, 1))\n\nwrite_csv(tbl_out, tbl_file_name)\ntbl_out\n\n\n\n\n\n\nquantile\nshare_match\n\n\n\n\n0%\n11.4\n\n\n10%\n54.6\n\n\n25%\n87.7\n\n\n50%\n98.4\n\n\n75%\n99.9\n\n\n100%\n100.0\n\n\n\n\n\n\nThe share of matched parties is weighted by the number of “party-voted-for” responses and is calculated for each country in every ESS round.\nThe next table summarizes the country level share of party matches for ESS rounds with data set matches.\n\n\nCode\ntbl_out &lt;-\n  prtv_share |&gt;\n  summarise(\n    min = min(share_match),\n    median = median(share_match) |&gt; round(1),\n    max = max(share_match),\n    ess_rounds = n_distinct(essround),\n    .by = cntry\n  ) |&gt;\n  filter(max &gt; 0) |&gt;\n  arrange(min, median)\n\nif (knitr::is_html_output()) {\n  tbl_out |&gt;\n    reactable(searchable = TRUE, striped = TRUE)\n} else {\n  tbl_out\n}"
  },
  {
    "objectID": "parlgov-stfdem.html#losers-consent-models",
    "href": "parlgov-stfdem.html#losers-consent-models",
    "title": "5  ParlGov losers’ consent",
    "section": "5.1 Losers’ consent models",
    "text": "5.1 Losers’ consent models\nSatisfaction with democracy by those that voted for parties in government vs. opposition. For a book length discussion and empirical assessment of European democracies see Anderson et.al. (2005) – esp. model page 104. A replication and extension to other regions is provided by Farrer and Zingher (2019, 525)\n\nAnderson, Christopher, ed. 2005. Losers’ Consent: Elections and Democratic Legitimacy. Oxford ; New York: Oxford University Press.\nFarrer, Benjamin, and Joshua N Zingher. 2019. “A Global Analysis of How Losing an Election Affects Voter Satisfaction with Democracy.” International Political Science Review 40(4): 518–34. — doi: 10.1093/poq/nfad003"
  },
  {
    "objectID": "parlgov-stfdem.html#variables",
    "href": "parlgov-stfdem.html#variables",
    "title": "5  ParlGov losers’ consent",
    "section": "5.2 Variables",
    "text": "5.2 Variables\nVariables used in losers’ consent models and context information\n\nstfdem — How satisfied with the way democracy works in country?\n\n0 // Extremely dissatisfied — 10 // Extremely satisfied\n\ncabinet — “party-voted-for” (prtv) in government after election\n\nParlGov based calculation\nexcluding caretaker governments\n\nlrscale — Placement on left right scale\n\n0 // Left — 10 // Right\n\ngndr — Gender\nagea — Age of respondent, calculated\neduyrs — Years of full-time education completed\nESS identifiers\n\ncntry — Country\nessround — ESS round\npspwght — Post-stratification weight // see ESS survey weights\ninw_date — Date of interview // various ESS inw* variables\n\nParty information\n\nprtv — Party voted for in last national election // aggregated ESS IDs\nprtv_name — Party voted for in last national election // party name\nfirst_ess_id — unique ESS party ID used in Party Facts"
  },
  {
    "objectID": "parlgov-stfdem.html#sec-sum-stats",
    "href": "parlgov-stfdem.html#sec-sum-stats",
    "title": "5  ParlGov losers’ consent",
    "section": "5.3 Summary statistics",
    "text": "5.3 Summary statistics\n\n\nCode\ness_cabinet &lt;-\n  ess_cabinet_raw |&gt;\n  select(essround, cntry, idno, cabinet = cabinet_party)\n\ness_lm &lt;-\n  ess_raw |&gt;\n  left_join(ess_cabinet) |&gt;\n  mutate(\n    across(c(lrscale, stfdem), \\(.x) as.integer(.x) - 1),\n    cabinet = case_when(\n      cabinet == 1 ~ \"Yes\",\n      cabinet == 0 ~ \"No\",\n      .default = NA\n    ),\n    cabinet = as.factor(cabinet) |&gt; fct_rev()\n  ) |&gt;\n  filter(!all(is.na(cabinet)), .by = c(cntry, essround))\n\ness_lm |&gt;\n  select(-idno) |&gt;\n  skim() |&gt;\n  round_numeric_variables(2)\n\n\n\nData summary\n\n\nName\nselect(ess_lm, -idno)\n\n\nNumber of rows\n433599\n\n\nNumber of columns\n14\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n3\n\n\nDate\n1\n\n\nfactor\n4\n\n\nnumeric\n6\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\ncntry\n0\n1.00\n2\n2\n0\n32\n0\n\n\nprtv\n171780\n0.60\n8\n14\n0\n2704\n0\n\n\nprtc\n240202\n0.45\n8\n10\n0\n2642\n0\n\n\n\nVariable type: Date\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nmedian\nn_unique\n\n\n\n\ninw_date\n912\n1.00\n2002-01-14\n2022-09-02\n2011-06-03\n4827\n\n\n\nVariable type: factor\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nordered\nn_unique\ntop_counts\n\n\n\n\ngndr\n331\n1.00\nFALSE\n2\nFem: 231527, Mal: 201741, No : 0\n\n\nprtv_party\n171780\n0.60\nFALSE\n888\nLab: 6580, Con: 6077, Chr: 5660, Soc: 4972\n\n\nprtc_party\n240202\n0.45\nFALSE\n900\nLab: 4949, Con: 4578, Chr: 4290, Soc: 3484\n\n\ncabinet\n209306\n0.52\nFALSE\n2\nYes: 121092, No: 103201\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nessround\n0\n1.00\n5.39\n2.80\n1\n3.0\n5.00\n8.00\n10.00\n▇▇▇▇▇\n\n\npspwght\n0\n1.00\n1.01\n0.52\n0\n0.7\n0.93\n1.18\n6.85\n▇▁▁▁▁\n\n\nagea\n2155\n1.00\n48.49\n18.62\n13\n33.0\n48.00\n63.00\n123.00\n▆▇▆▁▁\n\n\neduyrs\n5075\n0.99\n12.43\n4.13\n0\n10.0\n12.00\n15.00\n65.00\n▇▅▁▁▁\n\n\nlrscale\n55413\n0.87\n5.13\n2.23\n0\n4.0\n5.00\n7.00\n10.00\n▂▃▇▃▁\n\n\nstfdem\n15516\n0.96\n5.28\n2.51\n0\n4.0\n5.00\n7.00\n10.00\n▅▅▇▇▂"
  },
  {
    "objectID": "parlgov-stfdem.html#multi-level-models-ml",
    "href": "parlgov-stfdem.html#multi-level-models-ml",
    "title": "5  ParlGov losers’ consent",
    "section": "5.4 Multi-level models (ML)",
    "text": "5.4 Multi-level models (ML)\nModel variables preparation\n\nremoving outliers age (99% quantile)\nselecting only variables used in models\nremoving incomplete observations\ncentering of continuous variables (age, education, left-right)\n\n\n\nCode\n# quantile(ess_lm$eduyrs, probs = c(0, 0.5, 0.9, 0.95, 0.99, 0.999), na.rm = TRUE)\neduyrs_remove &lt;- quantile(ess_lm$eduyrs, probs = 0.99, na.rm = TRUE)\n\ness_lm_c &lt;-\n  ess_lm |&gt;\n  filter(eduyrs &lt; eduyrs_remove) |&gt;\n  select(stfdem, cabinet, gndr, eduyrs, agea, lrscale, cntry, essround, pspwght) |&gt;\n  na.omit() |&gt;\n  mutate(\n    essround_cntry = paste(essround, cntry),\n    across(c(agea, eduyrs, lrscale),\n      \\(.x) scale(.x, scale = FALSE) |&gt; as.vector(),\n      .names = \"{.col}_c\"\n    )\n  )\n\nplot_ggpredict &lt;- function(model, plot_terms) {\n  ggpredict(model, terms = plot_terms) |&gt;\n    plot(show.title = FALSE, show.legend = FALSE)\n}\n\nml_formula &lt;- \"stfdem ~ gndr +  cabinet*eduyrs_c + cabinet*poly(agea_c, 2) + cabinet*poly(lrscale_c, 2)\"\n\n\n\n5.4.1 Three ML models\nMulti-level models with quadric terms and interactions. Structure of models:\n\nModel 1 (ML-1) — ESS-Round/country and country\nModel 2 (ML-2) — ESS-Round and country\nModel 3 (ML-3) — country\n\nVisualization of results in Figure 5.1 and Figure 5.2 – see variable information in Section 5.3\n\n\nCode\nml1 &lt;- lmer(\n  as.formula(glue(\"{ml_formula} + (1 | cntry/essround_cntry)\")),\n  weights = pspwght,\n  data = ess_lm_c\n)\n\nml2 &lt;- lmer(\n  as.formula(glue(\"{ml_formula} + (1 | essround) + (1 | cntry)\")),\n  weights = pspwght,\n  data = ess_lm_c\n)\n\nml3 &lt;- lmer(\n  as.formula(glue(\"{ml_formula} + (1 | cntry)\")),\n  weights = pspwght,\n  data = ess_lm_c\n)\n\n\n\n\nCode\nmodels &lt;- list(\"ML-1\" = ml1, \"ML-2\" = ml2, \"ML-3\" = ml3)\n\nif (knitr::is_html_output()) {\n  modelsummary(models)\n} else {\n  modelsummary(models, output = \"markdown\")\n}\n\n\n\n\n\n\nML-1\nML-2\nML-3\n\n\n\n\n(Intercept)\n5.782\n5.790\n5.775\n\n\n\n(0.169)\n(0.184)\n(0.172)\n\n\ngndrFemale\n-0.182\n-0.178\n-0.179\n\n\n\n(0.009)\n(0.010)\n(0.010)\n\n\ncabinetNo\n-0.637\n-0.645\n-0.640\n\n\n\n(0.010)\n(0.010)\n(0.010)\n\n\neduyrs_c\n0.048\n0.045\n0.048\n\n\n\n(0.002)\n(0.002)\n(0.002)\n\n\npoly(agea_c, 2)1\n23.624\n21.075\n25.719\n\n\n\n(3.151)\n(3.192)\n(3.189)\n\n\npoly(agea_c, 2)2\n30.470\n30.403\n31.438\n\n\n\n(2.913)\n(2.957)\n(2.967)\n\n\npoly(lrscale_c, 2)1\n103.697\n105.407\n108.606\n\n\n\n(3.333)\n(3.204)\n(3.208)\n\n\npoly(lrscale_c, 2)2\n35.905\n39.358\n40.284\n\n\n\n(3.116)\n(3.149)\n(3.160)\n\n\ncabinetNo × eduyrs_c\n0.013\n0.014\n0.015\n\n\n\n(0.003)\n(0.003)\n(0.003)\n\n\ncabinetNo × poly(agea_c, 2)1\n-4.329\n-2.065\n-3.641\n\n\n\n(4.620)\n(4.675)\n(4.691)\n\n\ncabinetNo × poly(agea_c, 2)2\n13.465\n14.204\n13.904\n\n\n\n(4.284)\n(4.350)\n(4.366)\n\n\ncabinetNo × poly(lrscale_c, 2)1\n-22.081\n-23.826\n-26.594\n\n\n\n(4.862)\n(4.494)\n(4.496)\n\n\ncabinetNo × poly(lrscale_c, 2)2\n-108.724\n-113.550\n-113.758\n\n\n\n(4.367)\n(4.397)\n(4.413)\n\n\nSD (Intercept cntry)\n0.931\n0.965\n0.970\n\n\nSD (Observations)\n2.106\n2.142\n2.150\n\n\nSD (Intercept essround_cntrycntry)\n0.500\n\n\n\n\nSD (Intercept essround)\n\n0.219\n\n\n\n:———————————–\n———:\n———:\n———:\n\n\nNum.Obs.\n205611\n205611\n205611\n\n\nR2 Marg.\n0.040\n0.040\n0.041\n\n\nR2 Cond.\n0.233\n0.209\n0.203\n\n\nAIC\n918254.1\n924409.6\n925869.4\n\n\nBIC\n918417.9\n924573.3\n926022.9\n\n\nICC\n0.2\n0.2\n0.2\n\n\nRMSE\n2.13\n2.16\n2.17\n\n\n\n\n\nAnalysis of variance (ANOVA) models and refitting with Maximum Likelihood instead of Restricted Maximum Likelihood.\n\n\nCode\nanova(ml1, ml2, ml3) |&gt;\n  tidy() |&gt;\n  arrange(term)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nterm\nnpar\nAIC\nBIC\nlogLik\ndeviance\nstatistic\ndf\np.value\n\n\n\n\nml1\n16\n918249.0\n918412.7\n-459108.5\n918217.0\n7617.436\n1\n0\n\n\nml2\n16\n924404.7\n924568.4\n-462186.3\n924372.7\n0.000\n0\n\n\n\nml3\n15\n925864.4\n926017.9\n-462917.2\n925834.4\n\n\n\n\n\n\n\n\n\n\n\n5.4.2 Effects plot ML-1\nEffects plot Multi-Level Model 1 (ML-1, see Section 5.4.1)\n\n\nCode\nplot_ggpredict(ml1, c(\"lrscale_c [all]\", \"cabinet\")) +\n  plot_ggpredict(ml1, c(\"agea_c [all]\", \"cabinet\")) +\n  plot_ggpredict(ml1, c(\"eduyrs_c [all]\", \"cabinet\"))\n\n\n\n\n\nFigure 5.1: Effects plot (95% CIs) — Satisfaction with democracy\n\n\n\n\n\n\nCode\npl_dt_lr &lt;- ggpredict(ml1, c(\"lrscale_c [all]\", \"cabinet\"))\npl_dt_edu &lt;- ggpredict(ml1, c(\"eduyrs_c [all]\", \"cabinet\"))\npl_dt_age &lt;- ggpredict(ml1, c(\"agea_c [all]\"))\n\n\n\n\nCode\nadd_plot_layers &lt;- function(pl, var_name = \"x\") {\n  pl +\n    geom_hline(yintercept = 5, color = \"grey\", size = 0.5) +\n    geom_ribbon(aes(ymin = conf.low, ymax = conf.high), alpha = 0.1) +\n    scale_y_continuous(limits = c(3.5, 7)) +\n    labs(x = var_name, y = \"\") +\n    theme_minimal()\n}\n\ncolor_values &lt;- c(\"Yes\" = \"#E41A1C\", \"No\" = \"#377EB8\")\n\npl_lr &lt;-\n  ggplot(pl_dt_lr, aes(x, predicted, fill = group)) |&gt;\n  add_plot_layers(\"left-right\") +\n  geom_vline(xintercept = median(ess_lm_c$lrscale_c), color = \"grey\", size = 0.5, linetype = \"dashed\") +\n  geom_line(aes(colour = group)) +\n  guides(color = \"none\", fill = \"none\") +\n  scale_color_manual(values = color_values) +\n  scale_fill_manual(values = color_values)\n\npl_edu &lt;-\n  ggplot(pl_dt_edu, aes(x, predicted, fill = group)) |&gt;\n  add_plot_layers(\"education\") +\n  geom_vline(xintercept = median(ess_lm_c$eduyrs_c), color = \"grey\", size = 0.5, linetype = \"dashed\") +\n  geom_line(aes(colour = group)) +\n  guides(color = \"none\", fill = \"none\") +\n  scale_color_manual(values = color_values) +\n  scale_fill_manual(values = color_values)\n\npl_age &lt;-\n  ggplot(pl_dt_age, aes(x, predicted)) |&gt;\n  add_plot_layers(\"age\") +\n  geom_vline(xintercept = median(ess_lm_c$agea_c), color = \"grey\", size = 0.5, linetype = \"dashed\") +\n  geom_line()\n\npl &lt;- pl_lr + pl_edu + pl_age\n\nggsave(\"figures-tables/figure-2_ml-model-effects.png\", pl, width = 9, height = 6, dpi = 300)\npl\n\n\n\n\n\nFigure 5.2: Effects plot (95% CIs) — Satisfaction with democracy // Article version"
  },
  {
    "objectID": "parlgov-stfdem.html#linear-effects-ml",
    "href": "parlgov-stfdem.html#linear-effects-ml",
    "title": "5  ParlGov losers’ consent",
    "section": "5.5 Linear effects (ML)",
    "text": "5.5 Linear effects (ML)\nMulti-level model with linear terms and no interactions.\nVisualization of results in Figure 5.3 (standardized coefficients) and Figure 5.4 (effects) – see variable information in Section 5.3\n\n\nCode\nml_le &lt;- lmer(\n  \"stfdem ~ cabinet + gndr + eduyrs_c + agea_c + lrscale_c + (1 | cntry/essround_cntry)\",\n  weights = pspwght,\n  data = ess_lm_c\n)\n\n\n\n\nCode\nml_le |&gt;\n  tidy() |&gt;\n  kable(digits = 3)\n\n\n\n\n\n\n\n\n\n\n\n\n\neffect\ngroup\nterm\nestimate\nstd.error\nstatistic\n\n\n\n\nfixed\n\n(Intercept)\n5.775\n0.170\n33.996\n\n\nfixed\n\ncabinetNo\n-0.636\n0.010\n-64.341\n\n\nfixed\n\ngndrFemale\n-0.178\n0.009\n-18.849\n\n\nfixed\n\neduyrs_c\n0.051\n0.001\n37.025\n\n\nfixed\n\nagea_c\n0.002\n0.000\n6.679\n\n\nfixed\n\nlrscale_c\n0.094\n0.002\n44.172\n\n\nran_pars\nessround_cntry:cntry\nsd__(Intercept)\n0.503\n\n\n\n\nran_pars\ncntry\nsd__(Intercept)\n0.934\n\n\n\n\nran_pars\nResidual\nsd__Observation\n2.112\n\n\n\n\n\n\n\n\n\nCode\ncm &lt;- c(\n  \"cabinetNo\" = \"Opposition voter\",\n  \"eduyrs_c\" = \"Education years\",\n  \"gndrFemale\" = \"Women\",\n  \"agea_c\" = \"Age\",\n  \"lrscale_c\" = \"Left-right\"\n)\n\n# parameters::parameters(ml1, standardize = \"refit\")\n# modelplot(ml_le)\n\nmodelplot(ml_le, coef_map = rev(cm), standardize = \"refit\") +\n  labs(x = \"\")\n\n\n\n\n\nFigure 5.3: Standardized coefficients (95% CIs)– Linear effects model\n\n\n\n\n\n\nCode\nplot_ggpredict(ml_le, c(\"lrscale_c [all]\", \"cabinet\")) +\n  plot_ggpredict(ml_le, c(\"agea_c [all]\", \"cabinet\")) +\n  plot_ggpredict(ml_le, c(\"eduyrs_c [all]\", \"cabinet\"))\n\n\n\n\n\nFigure 5.4: Linear effects plot (95% CIs) — Satisfaction with democracy"
  },
  {
    "objectID": "parlgov-stfdem.html#fixed-effects-model",
    "href": "parlgov-stfdem.html#fixed-effects-model",
    "title": "5  ParlGov losers’ consent",
    "section": "5.6 Fixed effects model",
    "text": "5.6 Fixed effects model\nFixed effects model with quadric terms and interactions.\nVisualization of results in Figure 5.5 and variable information in Section 5.3\n\n\nCode\nm_fe &lt;-\n  lm_robust(as.formula(glue(\"{ml_formula} + cntry + factor(essround)\")),\n    weights = pspwght,\n    data = ess_lm_c\n  )\n\n\n\n\nCode\nm_fe |&gt;\n  tidy() |&gt;\n  mutate(term = str_remove_all(term, \"poly\\\\(|, 2\\\\)1\") |&gt; str_replace(fixed(\", 2)2\"), \"^2\")) |&gt;\n  filter(!str_starts(term, \"cntry|factor\")) |&gt;\n  select(-df, -outcome) |&gt;\n  kable(digits = 3)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nconf.low\nconf.high\n\n\n\n\n(Intercept)\n6.407\n0.037\n173.718\n0.000\n6.335\n6.479\n\n\ngndrFemale\n-0.178\n0.011\n-16.569\n0.000\n-0.199\n-0.157\n\n\ncabinetNo\n-0.645\n0.011\n-58.835\n0.000\n-0.667\n-0.624\n\n\neduyrs_c\n0.045\n0.002\n21.591\n0.000\n0.041\n0.050\n\n\nagea_c\n21.004\n3.505\n5.993\n0.000\n14.135\n27.874\n\n\nagea_c^2\n30.381\n3.306\n9.190\n0.000\n23.901\n36.860\n\n\nlrscale_c\n105.418\n3.903\n27.011\n0.000\n97.769\n113.068\n\n\nlrscale_c^2\n39.400\n4.134\n9.531\n0.000\n31.297\n47.502\n\n\ncabinetNo:eduyrs_c\n0.014\n0.003\n4.744\n0.000\n0.008\n0.020\n\n\ncabinetNo:agea_c\n-2.033\n5.236\n-0.388\n0.698\n-12.295\n8.229\n\n\ncabinetNo:agea_c^2\n14.216\n4.958\n2.867\n0.004\n4.499\n23.933\n\n\ncabinetNo:lrscale_c\n-23.832\n5.585\n-4.267\n0.000\n-34.779\n-12.885\n\n\ncabinetNo:lrscale_c^2\n-113.566\n5.823\n-19.502\n0.000\n-124.979\n-102.153\n\n\n\n\n\nFixed effects for countries (“cnty”) and ESS rounds (“essround”) not shown.\n\n\nCode\nm_fe |&gt;\n  glance() |&gt;\n  kable(digits = 2)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nr.squared\nadj.r.squared\nstatistic\np.value\ndf.residual\nnobs\nse_type\n\n\n\n\n0.18\n0.18\n756.54\n0\n205558\n205611\nHC2\n\n\n\n\n\n\n\nCode\nplot_ggpredict(m_fe, c(\"lrscale_c [all]\", \"cabinet\")) +\n  plot_ggpredict(m_fe, c(\"agea_c [all]\", \"cabinet\")) +\n  plot_ggpredict(m_fe, c(\"eduyrs_c [all]\", \"cabinet\"))\n\n\n\n\n\nFigure 5.5: Fixed effects model (95% CIs) — Satisfaction with democracy"
  },
  {
    "objectID": "parlgov-stfdem.html#share-covered",
    "href": "parlgov-stfdem.html#share-covered",
    "title": "5  ParlGov losers’ consent",
    "section": "5.7 Share covered",
    "text": "5.7 Share covered\n\n\n\nCode\nid_select &lt;- \"parlgov_id\" # \"ches_id\" + \"parlgov_id\"\ness_check &lt;- ess_cabinet_raw # ess_raw + ess_cabinet_raw\ntbl_file_name &lt;- \"figures-tables/table-2b_parlgov-coverage.csv\"\n\n\n\n\nWe calculate the share of matches for the “party-voted-for” (prtv) question. Excluded from the calculation are instances of other, independent, and technical (see Party Facts codebook).\n\n\nCode\nlink_table_technical &lt;-\n  read_rds(\"data/03-party-facts-links-technical.rds\")\n\nprtv &lt;-\n  ess_check |&gt;\n  left_join(link_table_technical, by = c(\"prtv\" = \"ess_id\")) |&gt;\n  select(cntry, essround, prtv, prtv_party, all_of(id_select), partyfacts_name, technical) |&gt;\n  filter(!is.na(prtv)) |&gt;\n  mutate(is_match = if_else(is.na(.data[[id_select]]), 0, 1))\n\nprtv_match &lt;-\n  prtv |&gt;\n  filter(technical != 7 & technical != 8 & technical != 12 | is.na(technical)) |&gt;\n  summarise(\n    prvt_n = n(),\n    is_match = first(is_match),\n    .by = c(cntry, essround, prtv, prtv_party)\n  )\n\nprtv_share &lt;-\n  prtv_match |&gt;\n  summarise(\n    share_match = (sum(prvt_n * is_match) * 100 / sum(prvt_n)) |&gt; round(1),\n    .by = c(cntry, essround)\n  )\n\n\nThe table summarizes the share of party matches across all countries and ESS rounds.\n\n\nCode\ntbl_out &lt;-\n  prtv_share |&gt;\n  reframe(\n    enframe(\n      quantile(share_match, c(0, 0.1, 0.25, 0.5, 0.75, 1)),\n      \"quantile\", \"share_match\"\n    )\n  ) |&gt;\n  mutate(share_match = round(share_match, 1))\n\nwrite_csv(tbl_out, tbl_file_name)\ntbl_out\n\n\n\n\n\n\nquantile\nshare_match\n\n\n\n\n0%\n11.4\n\n\n10%\n65.4\n\n\n25%\n81.9\n\n\n50%\n95.8\n\n\n75%\n99.2\n\n\n100%\n100.0\n\n\n\n\n\n\nThe share of matched parties is weighted by the number of “party-voted-for” responses and is calculated for each country in every ESS round.\nThe next table summarizes the country level share of party matches for ESS rounds with data set matches.\n\n\nCode\ntbl_out &lt;-\n  prtv_share |&gt;\n  summarise(\n    min = min(share_match),\n    median = median(share_match) |&gt; round(1),\n    max = max(share_match),\n    ess_rounds = n_distinct(essround),\n    .by = cntry\n  ) |&gt;\n  filter(max &gt; 0) |&gt;\n  arrange(min, median)\n\nif (knitr::is_html_output()) {\n  tbl_out |&gt;\n    reactable(searchable = TRUE, striped = TRUE)\n} else {\n  tbl_out\n}"
  }
]